<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Rodney Gomes <rodneygomes@gmail.com>">
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Overview - Flume</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">Flume</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Overview</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../installation/">Installation</a>
</li>

                        
                            
<li >
    <a href="../first_steps/">First Steps</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Adapters</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Streamers</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../adapters/streamers/">overview</a>
</li>

        
            
<li >
    <a href="../adapters/streamers/csv/">csv</a>
</li>

        
            
<li >
    <a href="../adapters/streamers/grok/">grok</a>
</li>

        
            
<li >
    <a href="../adapters/streamers/json/">json</a>
</li>

        
            
<li >
    <a href="../adapters/streamers/jsonl/">jsonl</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../adapters/">overview</a>
</li>

        
            
<li >
    <a href="../adapters/elastic/">elastic</a>
</li>

        
            
<li >
    <a href="../adapters/http/">http</a>
</li>

        
            
<li >
    <a href="../adapters/stdio/">stdio</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../moments/">Moments</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Procs</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../procs/">overview</a>
</li>

        
            
<li >
    <a href="../procs/diff/">diff</a>
</li>

        
            
<li >
    <a href="../procs/filter/">filter</a>
</li>

        
            
<li >
    <a href="../procs/head/">head</a>
</li>

        
            
<li >
    <a href="../procs/intersect/">intersect</a>
</li>

        
            
<li >
    <a href="../procs/keep/">keep</a>
</li>

        
            
<li >
    <a href="../procs/put/">put</a>
</li>

        
            
<li >
    <a href="../procs/reduce/">reduce</a>
</li>

        
            
<li >
    <a href="../procs/remove/">remove</a>
</li>

        
            
<li >
    <a href="../procs/seq/">seq</a>
</li>

        
            
<li >
    <a href="../procs/sort/">sort</a>
</li>

        
            
<li >
    <a href="../procs/tail/">tail</a>
</li>

        
            
<li >
    <a href="../procs/union/">union</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Reducers</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../procs/reduce/reducers/">overview</a>
</li>

        
            
<li >
    <a href="../procs/reduce/reducers/count/">count</a>
</li>

        
            
<li >
    <a href="../procs/reduce/reducers/date/">date</a>
</li>

        
            
<li >
    <a href="../procs/reduce/reducers/funcr/">funcr</a>
</li>

        
            
<li >
    <a href="../procs/reduce/reducers/iterate/">iterate</a>
</li>

        
            
<li >
    <a href="../procs/reduce/reducers/math/">math</a>
</li>

        
            
<li >
    <a href="../procs/reduce/reducers/maximum/">maximum</a>
</li>

        
            
<li >
    <a href="../procs/reduce/reducers/minimum/">minimum</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Sinks</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Views</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../sinks/views/">overview</a>
</li>

        
            
<li >
    <a href="../sinks/views/gnuplot/">gnuplot</a>
</li>

        
            
<li >
    <a href="../sinks/views/pygal/">pygal</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../sinks/">overview</a>
</li>

        
            
<li >
    <a href="../sinks/barchart/">barchart</a>
</li>

        
            
<li >
    <a href="../sinks/linechart/">linechart</a>
</li>

        
            
<li >
    <a href="../sinks/memory/">memory</a>
</li>

        
            
<li >
    <a href="../sinks/timechart/">timechart</a>
</li>

        
            
<li >
    <a href="../sinks/write/">write</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Sources</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../sources/">overview</a>
</li>

        
            
<li >
    <a href="../sources/emit/">emit</a>
</li>

        
            
<li >
    <a href="../sources/read/">read</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Third Party</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../thirdparty/">overview</a>
</li>

        
            
<li >
    <a href="../thirdparty/github/">github</a>
</li>

        
            
<li >
    <a href="../thirdparty/syslog/">syslog</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#overview">overview</a></li>
        
            <li><a href="#basics">basics</a></li>
        
            <li><a href="#streams-and-reducers">streams and reducers</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="overview">overview</h1>
<h2 id="basics">basics</h2>
<p>A <strong>flume</strong> program is pipeline of <strong>flume</strong> nodes that read points from a <em>source</em>
and process those points using various <strong>flume</strong> procs (short for processors)
which in turn push the points to a <em>sink</em>. Here's the basic structure of a
<strong>flume</strong> program:</p>
<pre><code>source | proc1 | ... | procN | sink
</code></pre>
<p>Now the above is a very simplified view of the world since a <strong>flume</strong> program
can in fact consist of multiple sources, sinks and even split and rejoin
streams of data at various points in the pipeline. For example you can read
from multiple sources and merge the points like so:</p>
<pre><code>(source1 ; source2 ; source3) | ... | sink
</code></pre>
<p>The parenthesis are used to expression parallel pipelines in <strong>flume</strong> and at
the end of the parenthesis block all those points are merged together in order
unless you use one of set procs such as <a href="../procs/union/">union</a>,
<a href="../procs/intersect/">intersect</a> or <a href="../procs/diff/">diff</a> to create the new 
stream applying the specific set operation you want applied. This same 
ability to handle <code>N</code> sources allows you to also split the stream at any point
in your pipeline. So here's another somewhat less abstract example:</p>
<pre><code>source
| (
    filter('value % 2 == 0') | put(even=count()),
    filter('value % 2 != 0') | put(odd=count())
) | sink
</code></pre>
<p>The above wouldn't be possible to calculate unless we split the stream since
we have to eliminate things from the stream on either side that are in direct
conflict with the other type of calculation involved. In a more imperative 
way of doing this you'd also split the stream by keeping the intermediate value
in two different variables tracking the odd vs even count.</p>
<h2 id="streams-and-reducers">streams and reducers</h2>
<p><strong>Flume</strong> can handle streams of points with and without a valid time field. The
main reason you want a time field is calculate reductions over your stream of
points. Without a time field you can do things such as adding fields to your
data and/or joining with other streams to decorate those with missing
information. Lets start by first diving into what a stream with a <code>time</code> field
looks like:</p>
<pre><code>emit(limit=10) | write('stdio')
</code></pre>

<p>The previous <strong>flume</strong> program uses the <a href="../sources/emit">emit</a> proc to create
points that contain just a <code>time</code> field starting as of right now and creating
a point every second until we've "emitted" a total of 10 points. The output
of running the above with the <strong>flume</strong> CLI looks like so:</p>
<pre><code class="bash">&gt; flume &quot;emit(limit=10) | write('stdio')&quot;
{&quot;time&quot;: &quot;2016-07-30T15:18:15.562Z&quot;}
{&quot;time&quot;: &quot;2016-07-30T15:18:16.562Z&quot;}
{&quot;time&quot;: &quot;2016-07-30T15:18:17.562Z&quot;}
{&quot;time&quot;: &quot;2016-07-30T15:18:18.562Z&quot;}
{&quot;time&quot;: &quot;2016-07-30T15:18:19.562Z&quot;}
{&quot;time&quot;: &quot;2016-07-30T15:18:20.562Z&quot;}
{&quot;time&quot;: &quot;2016-07-30T15:18:21.562Z&quot;}
{&quot;time&quot;: &quot;2016-07-30T15:18:22.562Z&quot;}
{&quot;time&quot;: &quot;2016-07-30T15:18:23.562Z&quot;}
{&quot;time&quot;: &quot;2016-07-30T15:18:24.562Z&quot;}
</code></pre>

<p>The output format used is <a href="http://jsonlines.org/">jsonlines</a> which allows for a
true stream of data since each line represents a valid <strong>JSON</strong> object. The 
previous stream has a <code>time</code> field so we can used the <a href="../procs/reduce">reduce</a>
proc to calculate time aligned reductions. This is done by specifying the 
reduction we want to calculate and the new field we want to create with the
result of that reduction. Here's a simple example:</p>
<pre><code class="bash">&gt; flume &quot;emit(limit=10) | reduce(count=count()) | write('stdio')&quot;
{&quot;count&quot;: 10, &quot;time&quot;: &quot;2016-07-30T15:22:30.033Z&quot;}
</code></pre>

<p>Now the <a href="../reducer/reducers/">reducer</a> used was <a href="../reduce/reducers/count">count</a>
which simply calculates for a given interval the number of points that passed
through the <a href="../procs/reduce/">reduce</a> proc during that time. The interval itself
is set with the argument <code>every</code> to the <strong>reduce</strong> proc and in this case since
we didn't set it to anything we basically said to reduce over the full length
of our stream.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
